# Salah GPT - Islamic Prayer Assistant

![Salah GPT Icon](https://raw.githubusercontent.com/twitter/twemoji/master/assets/svg/1f54b.svg)

**Salah GPT** is an intelligent, web-based Islamic prayer assistant built with Streamlit and powered by OpenAI's GPT-4 Turbo. It provides users with accurate and reliable information about Salah (Islamic prayer), prayer times, wudu (ablution), and related topics by searching reputable Islamic sources and APIs. The application supports multiple madhabs (schools of thought) and offers location-based prayer times, Quran and Hadith searches, and detailed guidance.

---

## Features

- **Prayer Times**: Fetch real-time prayer schedules for any city and country using the Aladhan API, with madhab-specific calculation methods.
- **Q&A System**: Ask questions about Salah, wudu, or prayer-related topics, and get structured responses generated by OpenAI based on authentic Islamic sources.
- **Islamic Knowledge Search**: Searches reputable websites (e.g., IslamQA, SeekersGuidance) and Sunnah.com for Hadith, plus Quran verses via the Quran API.
- **Madhab Support**: Customize responses and prayer calculations based on Hanafi, Shafii, Maliki, or Hanbali schools of thought.
- **Wudu & Salah Guidance**: Built-in step-by-step instructions for wudu and Salah prerequisites/pillars.
- **Awrah Guidance**: Gender- and madhab-specific awrah (covering) rules.
- **Multilingual Responses**: Responds in the same language as the user's query (detected automatically).
- **Caching & Retry Logic**: Optimized performance with caching (1 hour to 1 week) and robust retry mechanisms for API requests.
- **User-Friendly UI**: Clean, responsive design with custom CSS, prayer time highlights, and a chat interface.

---

## Technologies Used

- **Python**: Core programming language.
- **Streamlit**: Web application framework.
- **OpenAI API**: For generating intelligent, context-aware responses.
- **APIs**:
  - Aladhan API (prayer times and Qibla direction).
  - Quran API (verse search).
- **Web Scraping**: BeautifulSoup for scraping Islamic websites and Sunnah.com.
- **Geolocation**: Geopy and TimezoneFinder for accurate timezone detection.
- **Concurrency**: ThreadPoolExecutor for parallel website searches.
- **Security**: Input sanitization, API key protection via `.env`, and request throttling.

---

## Installation

### Prerequisites

- Python 3.8+
- A valid OpenAI API key (optional for basic features, required for AI responses).
- Internet connection for API calls and web scraping.

### Steps

1. **Clone the Repository**:

   ```bash
   git clone https://github.com/yourusername/salah-gpt.git
   cd salah-gpt
   ```

2. **Install Dependencies**:
   Create a virtual environment and install the required packages:

   ```bash
   python -m venv venv
   source venv/bin/activate  # On Windows: venv\Scripts\activate
   pip install -r requirements.txt
   ```

   Contents of `requirements.txt`:

   ```
   streamlit==1.25.0
   requests==2.31.0
   beautifulsoup4==4.12.2
   openai==1.10.0
   python-dotenv==1.0.0
   langdetect==1.0.9
   geopy==2.4.1
   timezonefinder==6.5.0
   pytz==2024.1
   aiohttp==3.9.3
   ```

3. **Set Up Environment Variables**:
   Create a `.env` file in the root directory and add your OpenAI API key:

   ```
   OPENAI_API_KEY=your_openai_api_key_here
   ```

4. **Run the Application**:

   ```bash
   streamlit run app.py
   ```

   Replace `app.py` with the name of your Python file containing the code.

---

## Usage

1. **Launch the App**:
   After running the command above, the app opens in your default browser (e.g., `http://localhost:8501`).

2. **Configure Settings**:
   - In the sidebar, select your madhab (optional).
   - Enter your city and country to view prayer times.
   - Provide an OpenAI API key (via `.env` or sidebar) for AI-generated responses.

3. **Ask Questions**:
   - Use the chat input at the bottom to ask about Salah, wudu, prayer times, etc. (e.g., "How do I perform wudu?", "When is Dhuhr in London?").
   - The app searches Islamic sources and generates a response.

4. **View Prayer Times**:
   - If location is provided, the sidebar displays prayer times with current/next prayer highlighted.

5. **Clear Chat**:
   - Click "Clear Conversation" to reset the chat history.

---

## Example Queries

- "What are the steps of wudu in the Hanafi madhab?"
- "What time is Fajr in Cairo, Egypt?"
- "What does the Quran say about prayer?"
- "How should I pray Dhuhr according to Shafii rulings?"

---

## Screenshots

*(Add screenshots here if hosting on GitHub)*

- **Main Interface**: Chat window with prayer guidance.
- **Sidebar**: Prayer times and settings.

---

## Notes

- **API Key Security**: The OpenAI API key is loaded from a `.env` file or entered securely via a password field in the sidebar.
- **Error Handling**: The app retries failed requests up to 3 times and provides fallback messages if searches fail.
- **Caching**: Responses are cached (e.g., prayer times for 6 hours, Quran data for 1 week) to reduce API calls.
- **Limitations**: Requires an internet connection and may be affected by API rate limits or website changes.

---

## Contributing

Contributions are welcome! To contribute:

1. Fork the repository.
2. Create a feature branch (`git checkout -b feature/your-feature`).
3. Commit your changes (`git commit -m "Add your feature"`).
4. Push to the branch (`git push origin feature/your-feature`).
5. Open a pull request.

Please ensure your code follows PEP 8 style guidelines and includes appropriate documentation.

---

## License

This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for details.

---

## Acknowledgments

- **xAI**: Inspiration for building helpful AI tools (not directly involved).
- **Islamic Sources**: IslamQA, SeekersGuidance, Sunnah.com, and others for their invaluable content.
- **Streamlit Community**: For an amazing framework.

---

## Contact

For questions or support, reach out via [your.email@example.com](mailto:your.email@example.com) or open an issue on GitHub.

---

*Last Updated: March 14, 2025*

---
